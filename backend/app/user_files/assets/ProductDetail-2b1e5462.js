import{o,c as i,F as f,r as b,b as a,t as l,e as g,_ as C,a as v,p as T,g as j,y as x,z as N,A as S,B as w,w as V,T as A,m as D,C as P,i as R,j as B,k as q,s as $,D as E,f as e,q as O,n as U}from"./index-9b392f3a.js";const F={key:0,class:"fa-solid fa-star scale"},G={key:1,class:"fa-regular fa-star scale"},k={__name:"Rating",props:{ratingStars:{type:Number}},setup(t){return(s,n)=>(o(),i("div",null,[(o(),i(f,null,b(5,d=>(o(),i(f,null,[d<=t.ratingStars?(o(),i("i",F)):(o(),i("i",G))],64))),64))]))}},M={class:"card mb-4"},z={class:"card-body"},J={class:"d-flex justify-content-between"},L={class:"d-flex flex-row align-items-center"},H=["src"],K={class:"small mb-0 ms-2"},Q={class:"d-flex flex-row align-items-center"},W=a("p",{class:"small text-muted mb-0"},"Upvote?",-1),X=a("i",{class:"far fa-thumbs-up mx-2 fa-xs text-black",style:{"margin-top":"-0.16rem"}},null,-1),Y=a("p",{class:"small text-muted mb-0"},"3",-1),Z={__name:"Comment",props:["avt","username","content","ratingStars"],setup(t){return(s,n)=>(o(),i("div",M,[a("div",z,[a("p",null,l(t.content),1),a("div",J,[a("div",L,[a("img",{src:t.avt,alt:"avatar",width:"25",height:"25"},null,8,H),a("p",K,l(t.username),1)]),a("div",Q,[g(k,{class:"me-1","rating-stars":t.ratingStars},null,8,["rating-stars"]),W,X,Y])])])]))}};const aa={},h=t=>(T("data-v-3dbacbf0"),t=t(),j(),t),ta={class:"rating"},sa=h(()=>a("span",{class:"icon"},[a("i",{class:"fa-regular fa-star"})],-1)),na=h(()=>a("span",{class:"icon"},[a("i",{class:"fa-regular fa-star"})],-1)),ea=h(()=>a("span",{class:"icon"},[a("i",{class:"fa-regular fa-star"})],-1)),oa=v('<span class="icon" data-v-3dbacbf0><i class="fa-regular fa-star" data-v-3dbacbf0></i></span><span class="icon" data-v-3dbacbf0><i class="fa-regular fa-star" data-v-3dbacbf0></i></span><span class="icon" data-v-3dbacbf0><i class="fa-regular fa-star" data-v-3dbacbf0></i></span>',3),ia=v('<span class="icon" data-v-3dbacbf0><i class="fa-regular fa-star" data-v-3dbacbf0></i></span><span class="icon" data-v-3dbacbf0><i class="fa-regular fa-star" data-v-3dbacbf0></i></span><span class="icon" data-v-3dbacbf0><i class="fa-regular fa-star" data-v-3dbacbf0></i></span><span class="icon" data-v-3dbacbf0><i class="fa-regular fa-star" data-v-3dbacbf0></i></span>',4),ra=v('<span class="icon" data-v-3dbacbf0><i class="fa-regular fa-star" data-v-3dbacbf0></i></span><span class="icon" data-v-3dbacbf0><i class="fa-regular fa-star" data-v-3dbacbf0></i></span><span class="icon" data-v-3dbacbf0><i class="fa-regular fa-star" data-v-3dbacbf0></i></span><span class="icon" data-v-3dbacbf0><i class="fa-regular fa-star" data-v-3dbacbf0></i></span><span class="icon" data-v-3dbacbf0><i class="fa-regular fa-star" data-v-3dbacbf0></i></span>',5);function ca(t,s){return o(),i("div",ta,[a("label",null,[a("input",{type:"radio",name:"rating",value:"1",onChange:s[0]||(s[0]=n=>t.$emit("ratingChange",1))},null,32),sa]),a("label",null,[a("input",{type:"radio",name:"rating",value:"2",onChange:s[1]||(s[1]=n=>t.$emit("ratingChange",2))},null,32),na,ea]),a("label",null,[a("input",{type:"radio",name:"rating",value:"3",onChange:s[2]||(s[2]=n=>t.$emit("ratingChange",3))},null,32),oa]),a("label",null,[a("input",{type:"radio",name:"rating",value:"4",onChange:s[3]||(s[3]=n=>t.$emit("ratingChange",4))},null,32),ia]),a("label",null,[a("input",{type:"radio",name:"rating",value:"5",onChange:s[4]||(s[4]=n=>t.$emit("ratingChange",5))},null,32),ra])])}const I=C(aa,[["render",ca],["__scopeId","data-v-3dbacbf0"]]);const la={inject:["ratingStars"],props:["productId"],components:{Comment:Z,Rating:k,RatingInput:I},setup(){return{authStore:x()}},async mounted(){this.$el.querySelectorAll(".form-outline").forEach(n=>new N.Input(n).init());var t=await fetch(`http://localhost:3000/product/${this.productId}/comment`);if(!t.ok){console.error(await t.json());return}var s=await t.json();this.comments=s.items},methods:{async addComment(t){if(!this.authStore.isAuthenticated)return;const s=await fetch("http://localhost:3000/user/comment/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:this.ratingStars,content:t,user:this.authStore.id,product:this.productId})});if(!s.ok)return;const d=(await s.json()).created;this.comments.unshift(d)}},data(){return{typingComment:"",comments:[]}}},da={class:"row d-flex justify-content-center"},ua={class:"col"},ma={class:"card shadow-0 border",style:{"background-color":"#f0f2f5"}},pa={class:"card-body p-4"},_a={class:"input-group mb-3"};function fa(t,s,n,d,m,_){const p=P("Comment");return o(),i("div",da,[a("div",ua,[a("div",ma,[a("div",pa,[a("div",_a,[S(a("input",{type:"text",id:"addAComment",class:"form-control",placeholder:"Nhập bình luận...","onUpdate:modelValue":s[0]||(s[0]=u=>m.typingComment=u)},null,512),[[w,m.typingComment]]),a("button",{class:"btn btn-primary",type:"button",onClick:s[1]||(s[1]=u=>_.addComment(m.typingComment))}," Thêm bình luận ")]),g(A,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutDown",tag:"div"},{default:V(()=>[(o(!0),i(f,null,b(m.comments,u=>(o(),D(p,{"rating-stars":u.rating,avt:"https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(4).webp",content:u.content,username:"Martha",key:u._id},null,8,["rating-stars","content"]))),128))]),_:1})])])])])}const ga=C(la,[["render",fa],["__scopeId","data-v-5c219d9e"]]),ba={class:"container my-5 p-5 px-lg-5 bg-white",style:{"border-radius":"25px"}},va={class:"row gx-4 gx-lg-5 align-items-center"},ha={class:"col-md-6"},ya=["src"],$a={class:"col-md-6"},Ca={class:"small mb-1"},xa={class:"display-5 fw-bolder"},Sa={key:0,class:"list-grou list-group-light"},wa={href:"javascript:void(0)",class:"list-group-item list-group-item-action px-3 border-0 rounded-3 mb-2 list-group-item-secondary"},ka={class:"fs-5 mb-5"},Ia={class:"text-decoration-line-through me-2"},Ta={class:"lead"},ja={class:"d-flex"},Na={class:"col-12"},Aa={__name:"ProductDetail",setup(t){const s=R("hostname"),n=B(),d=q(),m=x(),_=$(0),p=$(1);return E("ratingStars",_),m.fetchAuthInfo(),(u,c)=>{var y;return o(),i("div",ba,[a("div",va,[a("div",ha,[a("img",{class:"card-img-top mb-5 mb-md-0 img-fluid",src:e(s)+e(n).data.img,alt:"...",crossorigin:"anonymous"},null,8,ya)]),a("div",$a,[a("div",null,[a("div",Ca,l(e(n).data.branch.name),1),a("h1",xa,l(e(n).data.name),1),g(I,{onRatingChange:c[0]||(c[0]=r=>_.value=r),class:"mx-1 ms-0"}),((y=e(n).data.inSales)==null?void 0:y.length)>0?(o(),i("div",Sa,[(o(!0),i(f,null,b(e(n).data.inSales,r=>(o(),i("a",wa," Giảm "+l(r.saleType=="Promotion"?r.percent+"%":r.value+"VND"),1))),256))])):O("",!0),a("div",ka,[a("span",Ia,l(e(n).data.price),1),a("span",null,l(e(n).finalPrice),1)]),a("p",Ta,l(e(n).data.description),1),a("div",ja,[S(a("input",{class:"form-control text-center me-3",type:"num","onUpdate:modelValue":c[1]||(c[1]=r=>p.value=r),style:{"max-width":"3rem"}},null,512),[[w,p.value]]),a("button",{class:"btn btn-outline-dark flex-shrink-0",type:"button",onClick:c[3]||(c[3]=r=>e(d).addToCart(e(n).data,p.value))},[a("i",{class:"bi-cart-fill me-1",onClick:c[2]||(c[2]=r=>e(d).addToCart(e(n).data))}),U(" Thêm vào giỏ hàng ")])])])]),a("div",Na,[g(ga,{"product-id":e(n).data._id},null,8,["product-id"])])])])}}};export{Aa as default};
