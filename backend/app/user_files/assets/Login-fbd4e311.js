import{_ as c,y as d,u as h,z as m,o as p,c as u,b as t,G as f,n as g,a as n}from"./index-9b392f3a.js";import{c as b,w as _}from"./index-ee3c2e99.js";const v={inject:["isLoading"],setup(){const e=d(),s=h();return e.$subscribe((a,o)=>{localStorage.setItem("isSignedIn",o.isAuthenticated)},{detached:!0}),{authStore:e,alertsStore:s}},mounted:function(){this.$el.querySelectorAll(".form-outline").forEach(e=>{new m.Input(e).init()})},methods:{async loginAPI(e){this.isLoading=!0;var s=new FormData(e.target),a=b(s),[o,l]=await Promise.all([fetch("http://localhost:3000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:a}),_(700)]);if(this.isLoading=!1,!o.ok){this.alertsStore.push(o.status==401?{content:"Tên đăng nhập hoặc mật khẩu không đúng",type:"danger"}:{content:"Gặp lỗi gì rồi",type:"danger"});return}this.alertsStore.clear(),this.alertsStore.push({content:"Đăng nhập thành công",type:"success"}),this.authStore.isAuthenticated=!0,this.$router.push({name:"product",replace:!0})}}},w={class:"vh-100 gradient-custom"},x={class:"container py-5 h-100"},S={class:"row d-flex justify-content-center align-items-center h-100"},y={class:"col-12 col-md-8 col-lg-6 col-xl-5"},k={class:"card bg-dark text-white",style:{"border-radius":"1rem"}},A={class:"card-body p-5 text-center"},$={class:"mb-md-5 mt-md-4 pb-5"},T=t("h2",{class:"fw-bold mb-2 text-uppercase"},"Đăng nhập",-1),j=t("p",{class:"text-white-50 mb-5"},"Vui lòng nhập email và mật khẩu!",-1),I=n('<div class="form-outline form-white mb-4"><input type="email" id="email" class="form-control form-control-lg" name="email"><label class="form-label" for="email">Email</label></div><div class="form-outline form-white mb-4"><input type="password" id="password" class="form-control form-control-lg" name="password"><label class="form-label" for="password">Mật khẩu</label></div><p class="small mb-5 pb-lg-2"><a class="text-white-50" href="#!">Quên mật khẩu?</a></p><button class="btn btn-outline-light btn-lg px-5" type="submit">Đăng nhập</button>',4),L=[I],N=n('<div class="d-flex justify-content-center text-center mt-4 pt-1"><a class="text-white"><i class="fab fa-facebook-f fa-lg"></i></a><a class="text-white"><i class="fab fa-twitter fa-lg mx-4 px-2"></i></a><a class="text-white"><i class="fab fa-google fa-lg"></i></a></div>',1),P={class:"mb-0"};function D(e,s,a,o,l,r){return p(),u("section",w,[t("div",x,[t("div",S,[t("div",y,[t("div",k,[t("div",A,[t("div",$,[T,j,t("form",{action:"/login",method:"POST",onSubmit:s[0]||(s[0]=f(i=>r.loginAPI(i),["prevent"]))},L,32),N]),t("div",null,[t("p",P,[g("Không có tài khoản? "),t("a",{href:"javascript:void(0)",class:"text-white-50 fw-bold",onClick:s[1]||(s[1]=i=>e.isLogging=!1)},"Đăng ký")])])])])])])])])}const V=c(v,[["render",D]]);export{V as default};
