import{d as N,u as S,j as U,w as e,l as u,o as n,k as o,b as i,a as t,c as l,F as p,n as _,q as f,s as k,v as w,x,t as d}from"./index-28c83648.js";import{u as C,C as P,_ as h,M as b}from"./useTemplateRef-7b4f9a07.js";const E=N("users",{state:()=>({items:[]}),getters:{alertsStore:()=>S()},actions:{async fetchUsers(){if(this.items&&this.items.length==0){var g="http://localhost:3000/admin/user",c=await this.alertsStore.callAPI("danger",g);this.items=c.items}}}}),V=["onSubmit"],B={class:"modal-body"},F=t("div",{class:"form-outline mb-4"},[t("input",{type:"text",id:"addUserFirstnameInput",class:"form-control",name:"firstname"}),t("label",{class:"form-label",for:"addUserFirstnameInput"},"Họ")],-1),K=t("div",{class:"form-outline mb-4"},[t("input",{type:"text",id:"addUserLastnameInput",class:"form-control",name:"lastname"}),t("label",{class:"form-label",for:"addUserLastnameInput"},"Tên")],-1),A=t("div",{class:"form-outline mb-4"},[t("input",{type:"text",id:"addUserNumberInput",class:"form-control",name:"number"}),t("label",{class:"form-label",for:"addUserNumberInput"},"Số điện thoại")],-1),L=t("div",{class:"form-outline mb-4"},[t("input",{type:"email",id:"addUserEmailInput",class:"form-control",name:"email"}),t("label",{class:"form-label",for:"addUserEmailInput"},"Email")],-1),$=t("div",{class:"form-outline mb-4"},[t("input",{type:"password",id:"addUserPasswordInput",class:"form-control",name:"password"}),t("label",{class:"form-label",for:"addUserPasswordInput"},"Mật khẩu")],-1),X=t("div",{class:"form-outline mb-4"},[t("input",{type:"password",id:"addUserConfirmPassInput",class:"form-control",name:"passwordConfirmation"}),t("label",{class:"form-label",for:"addUserConfirmPassInput"},"Nhập lại mật khẩu")],-1),G=t("select",{class:"form-select mb-4","aria-label":"Chọn giới tính",name:"sex"},[t("option",{selected:""},"Giới tính"),t("option",{value:"user"},"Nam"),t("option",{value:"admin"},"Nữ")],-1),H=t("select",{class:"form-select mb-4","aria-label":"Chọn vai trò",name:"role"},[t("option",{selected:""},"Chọn vai trò người dùng"),t("option",{value:"user"},"Người dùng"),t("option",{value:"admin"},"Admin")],-1),j={key:0,class:"alert alert-danger"},D={key:1,class:"alert alert-success"},O=t("div",{class:"modal-footer"},[t("button",{type:"submit",class:"btn btn-primary btn-block mb-4"},"Thêm")],-1),q=["onSubmit"],R={class:"modal-body"},z=t("div",{class:"form-outline mb-4"},[t("input",{type:"text",id:"updateUserFirstnameInput",class:"form-control",name:"firstname"}),t("label",{class:"form-label",for:"updateUserFirstnameInput"},"Họ")],-1),J=t("div",{class:"form-outline mb-4"},[t("input",{type:"text",id:"updateUserLastnameInput",class:"form-control",name:"lastname"}),t("label",{class:"form-label",for:"updateUserLastnameInput"},"Tên")],-1),Q=t("div",{class:"form-outline mb-4"},[t("input",{type:"text",id:"updateUserNumberInput",class:"form-control",name:"number"}),t("label",{class:"form-label",for:"updateUserNumberInput"},"Số điện thoại")],-1),W=t("div",{class:"form-outline mb-4"},[t("input",{type:"email",id:"updateUserEmailInput",class:"form-control",name:"email"}),t("label",{class:"form-label",for:"updateUserEmailInput"},"Email")],-1),Y=t("div",{class:"form-outline mb-4"},[t("input",{type:"password",id:"updateUserPasswordInput",class:"form-control",name:"password"}),t("label",{class:"form-label",for:"updateUserPasswordInput"},"Mật khẩu")],-1),Z=t("select",{class:"form-select mb-4","aria-label":"Chọn giới tính",name:"sex"},[t("option",{selected:""},"Giới tính"),t("option",{value:"user"},"Nam"),t("option",{value:"admin"},"Nữ")],-1),tt=t("select",{class:"form-select mb-4","aria-label":"Chọn vai trò",name:"role"},[t("option",{selected:""},"Chọn vai trò người dùng"),t("option",{value:"user"},"Người dùng"),t("option",{value:"admin"},"Admin")],-1),et={key:0,class:"alert alert-danger"},st={key:1,class:"alert alert-success"},at=t("div",{class:"modal-footer"},[t("button",{type:"submit",class:"btn btn-primary btn-block mb-4"},"Thêm")],-1),nt={class:"modal-body"},lt=t("div",null,[t("p",{class:"text-warning text-center"},"Bạn có chắc muốn xóa người dùng này")],-1),ot={key:0,class:"alert alert-danger"},it={key:1,class:"alert alert-success"},dt={class:"modal-footer"},rt=["onClick"],_t={__name:"User",setup(g){const c=E();c.fetchUsers();const I=w("hostname"),v=C("updationModal"),y=C("deletionModal");return(mt,ct)=>{const m=x("VTh"),M=x("VTr");return n(),U(P,{"api-url":`${u(I)}/admin/user`,"deletion-modal":u(y),"updation-modal":u(v),"fetched-data":u(c)},{modalTriggerButtons:e(()=>[o(h,{target:"addUserModal"},{default:e(()=>[i(" Thêm người dùng ")]),_:1})]),additionModal:e(({addHandler:r,errors:a})=>[o(b,{id:"addUserModal",ref:"additionModal"},{modalTitle:e(()=>[i(" Thêm người dùng ")]),default:e(()=>[t("form",{onSubmit:k(s=>r(s),["prevent"]),method:"POST"},[t("div",B,[F,K,A,L,$,X,G,H,a&&a.length!=0?(n(),l("div",j,[(n(!0),l(p,null,_(a,s=>(n(),l("p",null,d(s.msg),1))),256))])):a&&a.length==0?(n(),l("div",D," Thêm thành công ")):f("",!0)]),O],40,V)]),_:2},1536)]),updationModal:e(({updateHandler:r,errors:a})=>[o(b,{id:"updateUserModal",ref_key:"updationModal",ref:v},{modalTitle:e(()=>[i(" Thêm người dùng ")]),default:e(()=>[t("form",{onSubmit:k(s=>r(s),["prevent"]),method:"POST"},[t("div",R,[z,J,Q,W,Y,Z,tt,a&&a.length!=0?(n(),l("div",et,[(n(!0),l(p,null,_(a,s=>(n(),l("p",null,d(s.msg),1))),256))])):a&&a.length==0?(n(),l("div",st," Thêm thành công ")):f("",!0)]),at],40,q)]),_:2},1536)]),deletionModal:e(({deleteHandler:r,errors:a})=>[o(b,{id:"deleteUserModal",ref_key:"deletionModal",ref:y},{modalTitle:e(()=>[i(" Xóa người dùng ")]),default:e(()=>[t("div",nt,[lt,a&&a.length!=0?(n(),l("div",ot,[(n(!0),l(p,null,_(a,s=>(n(),l("p",null,d(s.msg),1))),256))])):a&&a.length==0?(n(),l("div",it," Xóa sản phẩm thành công ")):f("",!0)]),t("div",dt,[t("button",{class:"btn btn-primary btn-block mb-4",onClick:s=>r()},"Xóa",8,rt)])]),_:2},1536)]),tableColumnNames:e(()=>[t("tr",null,[o(m,{sortKey:"_id"},{default:e(()=>[i("#")]),_:1}),o(m,{class:"text-center",sortKey:"name"},{default:e(()=>[i("Họ")]),_:1}),o(m,{class:"text-center",sortKey:"price"},{default:e(()=>[i("Tên")]),_:1}),o(m,{class:"text-center",sortKey:"description"},{default:e(()=>[i("Số điện thoại")]),_:1}),o(m,{class:"text-center",sortKey:"branch"},{default:e(()=>[i("Email")]),_:1}),o(m,{class:"text-center",sortKey:"origin"},{default:e(()=>[i("Giới tính")]),_:1})])]),tableColumnDatas:e(({rows:r,selectItem:a})=>[(n(!0),l(p,null,_(r,s=>(n(),U(M,{key:s._id,row:s},{default:e(()=>[t("td",null,d(s._id),1),t("td",null,d(s.firstname),1),t("td",null,d(s.lastname),1),t("td",null,d(s.number),1),t("td",null,d(s.email),1),t("td",null,d(s.sex==="Male"?"Nam":"Nữ"),1),t("td",null,[o(h,{target:"updateUserModal",class:"me-2 btn btn-warning",onClick:T=>a(s)},{default:e(()=>[i(" Sửa ")]),_:2},1032,["onClick"]),o(h,{target:"deleteUserModal",class:"btn btn-danger",onClick:T=>a(s)},{default:e(()=>[i(" Xóa ")]),_:2},1032,["onClick"])])]),_:2},1032,["row"]))),128))]),_:1},8,["api-url","deletion-modal","updation-modal","fetched-data"])}}};export{_t as default};
